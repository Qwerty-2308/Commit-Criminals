<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Circle Up - AI Enabled</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./style.css">
</head>

<body>
  <div class="bg"></div>

  <header class="nav">
    <div class="brand" onclick="navigateTo('/')" style="cursor: pointer;">Circle<strong>Up</strong></div>
    <div class="nav-links" style="display: none;">
      <a href="#/lost-found" onclick="navigateTo('/lost-found')">Lost & Found</a>
      <a href="#/chat" onclick="navigateTo('/chat')">Circle Chat</a>
    </div>
    <div class="nav-right">
      <div id="auth-buttons" style="display: flex; gap: 10px;">
        <a href="#/login" onclick="navigateTo('/login')" class="pill ghost" style="text-decoration: none;">Log in</a>
        <a href="#/login" onclick="navigateTo('/login')" class="pill primary" style="text-decoration: none;">Sign up</a>
      </div>
      <div id="user-section" style="display: none; align-items: center; gap: 15px;">
        <span id="username-display" style="color: white; font-weight: 600;"></span>
        <button onclick="handleLogout()" class="pill ghost" style="text-decoration: none; cursor: pointer;">Log
          out</button>
      </div>
    </div>
  </header>

  <div class="app">
    <div id="page-home" class="page">
      <!-- Landing (unchanged) -->
      <section class="hero" id="hero-content">
        <div>
          <h1 class="h-title">Post it. Search it. Find it.<br />Circle Chat</h1>
          <p class="h-sub">One place to recover lost items, connect with peers, and solve problems together ‚Äî anytime,
            anywhere.</p>
        </div>
        <div class="shape-wrap">
          <div class="stack">
            <div class="disc"></div>
            <div class="disc"></div>
            <div class="disc"></div>
            <div class="disc"></div>
            <div class="disc"></div>
            <div class="disc"></div>
            <div class="disc"></div>
            <div class="disc"></div>
            <div class="disc"></div>
            <div class="disc"></div>
            <div class="disc"></div>
            <div class="iris left">
              <div class="pupil"></div>
            </div>
            <div class="iris right">
              <div class="pupil"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- Other sections (enhanced) -->
      <section class="action-section" id="action-content">
        <div class="chat-bubble bubble1"></div>
        <div class="chat-bubble bubble2"></div>
        <div class="chat-bubble bubble3"></div>
        <div class="chat-bubble bubble4"></div>
        <div class="chat-bubble bubble5"></div>
        <div class="chat-bubble bubble1"></div>
        <div class="chat-bubble bubble2"></div>
        <div class="chat-bubble bubble3"></div>
        <div class="chat-bubble bubble4"></div>
        <div class="chat-bubble bubble5"></div>
        <div class="chat-bubble bubble1"></div>
        <div class="chat-bubble bubble2"></div>
        <div class="chat-bubble bubble3"></div>
        <div class="chat-bubble bubble4"></div>
        <div class="chat-bubble bubble5"></div>
        <div class="action reveal">
          <div class="icon-box add-icon">+</div> Add
        </div>
        <div class="action reveal">
          <div class="icon-box send-icon">‚úàÔ∏è</div> Send
        </div>
        <div class="action reveal">
          <div class="icon-box exchange-icon">‚áÑ</div> Exchange
        </div>
      </section>
      <!--add links to lost and found and circle chat and Question and ansewer-->

      <!-- Quick Access Links -->
      <section id="quick-access" class="section">
        <p class="kicker">Quick Access</p>
        <h2 class="title">Jump Right In</h2>
        <div class="quick-links">
          <a href="#/chat" class="quick-link-card reveal">
            <div class="quick-icon">üí¨</div>
            <h3>Circle Chat</h3>
            <p>Join the community conversation</p>
          </a>
          <a href="#/chat" onclick="setTimeout(() => switchChatTab('qa'), 100)" class="quick-link-card reveal">
            <div class="quick-icon">‚ùì</div>
            <h3>Q & A</h3>
            <p>Ask questions, get answers</p>
          </a>
          <a href="#/lost-found" class="quick-link-card reveal">
            <div class="quick-icon">üîç</div>
            <h3>Lost & Found</h3>
            <p>Report or find lost items</p>
          </a>
        </div>
      </section>

      <footer>
        <div class="footer-content">
          <h2>CircleUp Community</h2>
          <p>Stay connected. Share ideas. Build together.</p>
          <div class="socials"><a href="#">üåê</a><a href="#">üíº</a><a href="#">üê¶</a><a href="#">üì∏</a></div>
          <div class="footer-bottom">¬©Ô∏è 2025 CircleUp. All rights reserved.</div>
        </div>
      </footer>
    </div> <!-- End page-home -->

    <!-- Login Page -->
    <div id="page-login" class="page" style="display: none;">
      <div class="login-bg-glow"></div>
      <a href="#/" class="back-link">‚Üê Back to Home</a>

      <div class="auth-container">
        <div class="auth-header">
          <h1 id="page-title">Welcome Back</h1>
          <p id="page-subtitle">Enter your details to access your account</p>
        </div>

        <form id="auth-form">
          <div class="form-group" id="username-group" style="display: none;">
            <label>Username</label>
            <input type="text" id="username" placeholder="Choose a username">
          </div>

          <div class="form-group">
            <label>Email</label>
            <input type="email" id="email" required placeholder="name@example.com">
          </div>

          <div class="form-group">
            <label>Password</label>
            <input type="password" id="password" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
            <small id="password-hint" style="display: none; color: rgba(255,255,255,0.5); margin-top: 5px;">Must be
              at least 6 characters</small>
          </div>

          <div id="error-msg" style="color: #ef4444; margin-bottom: 20px; font-size: 14px; text-align: center;"></div>

          <button type="submit" class="btn primary" id="submit-btn" style="width: 100%;">
            <span id="btn-text">Sign In</span>
            <span id="loading-text" style="display: none;">Processing...</span>
          </button>
        </form>

        <div class="auth-footer">
          <span id="switch-text">Don't have an account?</span>
          <a id="switch-mode">Sign up</a>
        </div>
      </div>
    </div>
    <!-- Chat Page -->
    <div id="page-chat" class="page" style="display: none;">
      <div class="chat-container">
        <div class="chat-header">
          <h1>Community Chat</h1>
          <p>Connect with everyone on campus</p>
          <div class="lf-tabs">
            <button class="tab-btn active" onclick="switchChatTab('chat')">Chat</button>
            <button class="tab-btn" onclick="switchChatTab('qa')">Q/A</button>
          </div>
        </div>

        <!-- Chat View -->
        <div id="chat-view">
          <div id="chat-messages" class="chat-messages-area">
            <!-- Messages will be loaded here -->
          </div>
          <form class="chat-input-area" onsubmit="sendChatMessage(event)">
            <input type="text" id="chat-input" placeholder="Type a message..." autocomplete="off">
            <button type="submit" id="chat-send-btn" class="btn primary">Send</button>
          </form>
        </div>

        <!-- Q/A View -->
        <div id="qa-view" style="display: none;">
          <div style="padding: 20px; text-align: center;">
            <button onclick="openCreateModal('question')" class="btn primary">+ Ask Question</button>
          </div>
          <div id="questions-list" class="items-list">
            <!-- Questions will be loaded here -->
          </div>
        </div>
      </div>
    </div>
    <!-- Lost & Found Page -->
    <div id="page-lost-found" class="page" style="display: none;">
      <div class="chat-container">
        <div class="chat-header">
          <h1>Lost & Found</h1>
          <p>Report lost items or help others find theirs</p>
          <div class="lf-tabs">
            <button class="tab-btn active" onclick="switchLostFoundTab('lost')">Lost Items</button>
            <button class="tab-btn" onclick="switchLostFoundTab('found')">Found Items</button>
          </div>
          <button onclick="openCreateModal('lost-found')" class="btn small primary" style="margin-top: 10px;">+ Report
            Item</button>
        </div>
        <div class="lf-container">
          <div id="lost-view" class="lf-view">
            <div id="lost-items" class="items-list">
              <!-- Lost items loaded here -->
            </div>
          </div>
          <div id="found-view" class="lf-view" style="display: none;">
            <div id="found-items" class="items-list">
              <!-- Found items loaded here -->
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Create Modal (Shared) -->
    <div id="create-modal" class="modal" style="display: none;">
      <div class="modal-content">
        <h2 id="create-modal-title">Report Item</h2>
        <form id="create-form" onsubmit="handleCreateContent(event)">
          <div class="form-group">
            <label>Title</label>
            <input type="text" id="create-title" required placeholder="e.g., Blue Wallet">
          </div>

          <div class="form-group" id="create-type-group">
            <label>Type</label>
            <select id="create-type">
              <option value="lost">Lost</option>
              <option value="found">Found</option>
            </select>
          </div>

          <div class="form-group" id="create-content-group">
            <label>Description</label>
            <textarea id="create-content" rows="4" required placeholder="Describe the item..."></textarea>
          </div>

          <div class="form-group" id="create-contact-group">
            <label>Contact Info</label>
            <input type="text" id="create-contact" placeholder="Phone, Email, or 'DM me'">
          </div>

          <div class="form-group" id="create-image-group">
            <label>Image (Optional)</label>
            <input type="file" id="create-image" accept="image/*">
            <div id="image-preview"></div>
          </div>

          <div id="create-error" class="error-msg"></div>

          <div class="modal-actions">
            <button type="button" class="btn secondary" onclick="closeCreateModal()">Cancel</button>
            <button type="submit" class="btn primary">Create</button>
          </div>
        </form>
      </div>
    </div>
  </div> <!-- End .app -->

  <div class="dock">
    <div class="item" onclick="navigateTo('/lost-found')">Lost & Found</div>
    <div class="item" onclick="navigateTo('/chat')">Circle Chat</div>
    <div class="item" id="chatbot-btn">AI Chatbot</div>
  </div>

  <div class="chatbot-box" id="chatbot">
    <div class="chatbot-header"><span>CircleUp AI</span></div>
    <div class="chatbot-messages" id="ai-chat-messages"></div>
    <div class="chatbot-input"><input type="text" id="ai-chat-input" placeholder="Ask..."><button
        id="ai-chat-send">Send</button></div>
    <div class="config-modal" id="config-modal">
      <h3>Enable Real AI</h3>
      <p>Get free key from <a href="https://aistudio.google.com/app/apikey" target="_blank">Google AI Studio</a>.</p>
      <input type="password" id="api-key-input" placeholder="Paste API key">
      <button class="save-btn" id="save-key">Save</button><button class="cancel-btn" id="cancel-config">Cancel</button>
    </div>
  </div>

  <div class="cursor-light" id="cursorLight"></div>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="app.js"></script>
</body>

</html>